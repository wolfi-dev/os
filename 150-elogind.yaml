# Generated from https://gitlab.alpinelinux.org/alpine/aports/-/raw/master/community/elogind/APKBUILD
package:
  name: elogind
  version: "252.24"
  epoch: 0
  description: Standalone fork of systemd's elogind
  copyright:
    - license: GPL-2.0-or-later LGPL-2.1-or-later

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      - acl-dev
      - coreutils
      - dbus-dev
      - docbook-xsl
      - eudev-dev
      - gettext-dev
      - glib-dev
      - gperf
      - libcap-dev
      - libseccomp-dev
      - libxslt-dev
      - linux-pam-dev
      - m4
      - meson
      - pcre2-dev
      - py3-jinja2
      - dbus
      - shadow
      - busctl

pipeline:
  - uses: melange/git-checkout
    with:
      expected-commit: ""
      repository: https://github.com/elogind/elogind
      tag: ${{package.version}}

  - uses: autoconf/configure

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

subpackages:
  - name: elogind-common
    pipeline:
      - uses: split/FIXME
    description: elogind FIXME

  - name: elogind-dev
    pipeline:
      - uses: split/dev
    dependencies:
      runtime:
        - elogind
        - dbus
        - shadow
        - busctl
    description: elogind dev

  - name: elogind-doc
    pipeline:
      - uses: split/manpages
    description: elogind manpages

  - name: elogind-lang
    pipeline:
      - uses: split/FIXME
    description: elogind FIXME

  - name: elogind-openrc
    pipeline:
      - uses: split/FIXME
    description: elogind FIXME

  - name: libelogind
    pipeline:
      - runs: FIXME

  - name: elogind-zsh-completion
    pipeline:
      - uses: split/FIXME
    description: elogind FIXME

  - name: elogind-bash-completion
    pipeline:
      - uses: split/FIXME
    description: elogind FIXME

  - name: busctl
    pipeline:
      - runs: FIXME

update:
  enabled: true
  manual: false
  require-sequential: false
  github:
    identifier: elogind/elogind

test:
  environment: {}
  pipeline:
    - name: Verify elogind installation, please improve the test as needed
      runs: elogind --version || exit 1
