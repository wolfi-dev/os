# Generated from https://gitlab.alpinelinux.org/alpine/aports/-/raw/master/community/pdal/APKBUILD
package:
  name: pdal
  version: 2.8.4
  epoch: 0
  description: PDAL is a C++ BSD library for translating and manipulating point cloud data.
  copyright:
    - license: BSD-2-Clause

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      - cmake
      - cpd-dev
      - curl-dev
      - eigen-dev
      - fgt-dev
      - gdal-dev
      - hdf5-dev
      - libgeotiff-dev
      - libpq-dev
      - libxml2-dev
      - linux-headers
      - openscenegraph-dev
      - openssl-dev
      - proj-dev
      - py3-numpy-dev
      - python3-dev
      - samurai
      - sqlite-dev
      - zstd-dev
      - xerces-c-dev
      - pdal-dev

pipeline:
  - uses: fetch
    with:
      expected-sha256: c27dc79af0b26f9cb3209b694703e9d576f1b0c8c05b36206fd5e310494e75b5
      uri: https://github.com/PDAL/PDAL/releases/download/${{package.version}}/PDAL-${{package.version}}-src.tar.bz2

  - uses: autoconf/configure

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

subpackages:
  - name: pdal-dev
    pipeline:
      - uses: split/dev
    dependencies:
      runtime:
        - pdal
        - pdal
    description: pdal dev

  - name: libpdal-plugins
    pipeline:
      - uses: split/FIXME
    description: pdal FIXME

test:
  environment: {}
  pipeline:
    - name: Verify pdal installation, please improve the test as needed
      runs: pdal --version || exit 1
