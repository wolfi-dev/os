# Generated from https://gitlab.alpinelinux.org/alpine/aports/-/raw/master/community/pipewire/APKBUILD
package:
  name: pipewire
  version: 1.4.1
  epoch: 0
  description: Multimedia processing graphs
  copyright:
    - license: LGPL-2.1-or-later

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      - alsa-lib-dev
      - avahi-dev
      - bash
      - bluez-dev
      - dbus-dev
      - doxygen
      - eudev-dev
      - fdk-aac-dev
      - glib-dev
      - graphviz
      - gst-plugins-base-dev
      - gstreamer-dev
      - jack-dev
      - libcamera-dev
      - libfreeaptx-dev
      - liblc3-dev
      - libusb-dev
      - libx11-dev
      - lilv-dev
      - meson
      - modemmanager-dev
      - ncurses-dev
      - pulseaudio-dev
      - py3-docutils
      - readline-dev
      - roc-toolkit-dev
      - sbc-dev
      - vulkan-loader-dev
      - webrtc-audio-processing-2-dev
      - xmltoman
      - libldac-dev

pipeline:
  - uses: fetch
    with:
      expected-sha256: 1eba67c6e5acfa23e32d70bdbabab5a3d221c4bfbb12e17aa29fd5051c095fa4
      uri: https://gitlab.freedesktop.org/PipeWire/pipewire/-/archive/${{package.version}}/pipewire-${{package.version}}.tar.gz

  - uses: autoconf/configure

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

subpackages:
  - name: pipewire-dbg
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-doc
    pipeline:
      - uses: split/manpages
    description: pipewire manpages

  - name: pipewire-alsa
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-pulse
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-pulse-openrc
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-jack
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-jack-dev
    pipeline:
      - uses: split/dev
    dependencies:
      runtime:
        - pipewire
    description: pipewire dev

  - name: pipewire-dev
    pipeline:
      - uses: split/dev
    dependencies:
      runtime:
        - pipewire
    description: pipewire dev

  - name: gst-plugin-pipewire
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-zeroconf
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-spa-bluez
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-spa-vulkan
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-tools
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-spa-tools
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-lang
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-echo-cancel
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-openrc
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

  - name: pipewire-libs
    pipeline:
      - uses: split/FIXME
    description: pipewire FIXME

test:
  environment: {}
  pipeline:
    - name: Verify pipewire installation, please improve the test as needed
      runs: pipewire --version || exit 1
