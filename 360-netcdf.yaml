# Generated from https://gitlab.alpinelinux.org/alpine/aports/-/raw/master/community/netcdf/APKBUILD
package:
  name: netcdf
  version: 4.9.2
  epoch: 0
  description: Libraries for the Unidata network Common Data Format
  copyright:
    - license: BSD-3-Clause

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      - bash
      - bzip2-dev
      - cmake
      - curl-dev
      - hdf5-dev
      - libaec-dev
      - libxml2-dev
      - m4
      - samurai

pipeline:
  - uses: fetch
    with:
      expected-sha256: bc104d101278c68b303359b3dc4192f81592ae8640f1aee486921138f7f88cb7
      uri: https://github.com/Unidata/netcdf-c/archive/v${{package.version}}.tar.gz

  - uses: autoconf/configure

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

subpackages:
  - name: netcdf-doc
    pipeline:
      - uses: split/manpages
    description: netcdf manpages

  - name: netcdf-dev
    pipeline:
      - uses: split/dev
    dependencies:
      runtime:
        - netcdf
    description: netcdf dev

  - name: netcdf-utils
    pipeline:
      - uses: split/FIXME
    description: netcdf FIXME

test:
  environment: {}
  pipeline:
    - name: Verify netcdf installation, please improve the test as needed
      runs: netcdf --version || exit 1
