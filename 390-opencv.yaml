# Generated from https://gitlab.alpinelinux.org/alpine/aports/-/raw/master/community/opencv/APKBUILD
package:
  name: opencv
  version: 4.11.0
  epoch: 0
  description: Open source computer vision and machine learning library
  copyright:
    - license: BSD-3-Clause

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      - openblas-dev
      - eigen-dev
      - ffmpeg-dev
      - freetype-dev
      - glew-dev
      - gst-plugins-base-dev
      - gstreamer-dev
      - harfbuzz-dev
      - hdf5-dev
      - libdc1394-dev
      - libgphoto2-dev
      - libva-glx-dev
      - mesa-dev
      - onetbb-dev
      - openexr-dev
      - openjpeg-dev
      - openjpeg-tools
      - py3-setuptools
      - qt6-qtbase-dev
      - vtk-dev
      - clang
      - cmake
      - lld
      - samurai
      - python3-dev
      - py3-gpep517
      - py3-numpy-dev
      - py3-setuptools
      - py3-wheel
      - openjpeg-tools-dev
      - py3-setuptools-dev

pipeline:
  - uses: fetch
    with:
      expected-sha256: 9a7c11f924eff5f8d8070e297b322ee68b9227e003fd600d4b8122198091665f
      uri: https://github.com/opencv/opencv/archive/${{package.version}}/opencv-${{package.version}}.tar.gz

  - uses: fetch
    with:
      expected-sha256: 2dfc5957201de2aa785064711125af6abb2e80a64e2dc246aca4119b19687041
      uri: https://github.com/opencv/opencv_contrib/archive/${{package.version}}/opencv_contrib-${{package.version}}.tar.gz

  - uses: autoconf/configure

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

subpackages:
  - name: opencv-dbg
    pipeline:
      - uses: split/FIXME
    description: opencv FIXME

  - name: opencv-dev
    pipeline:
      - uses: split/dev
    dependencies:
      runtime:
        - opencv
        - blas-dev
        - eigen-dev
        - ffmpeg-dev
        - freetype-dev
        - glew-dev
        - gst-plugins-base-dev
        - gstreamer-dev
        - harfbuzz-dev
        - hdf5-dev
        - libdc1394-dev
        - libgphoto2-dev
        - libva-glx-dev
        - mesa-dev
        - onetbb-dev
        - openblas-dev
        - openexr-dev
        - openjpeg-dev
        - openjpeg-tools
        - py3-setuptools
        - qt6-qtbase-dev
        - vtk-dev
    description: opencv dev

  - name: opencv-doc
    pipeline:
      - uses: split/manpages
    description: opencv manpages

  - name: py3-opencv-pyc
    pipeline:
      - uses: split/FIXME
    description: opencv FIXME

  - name: py3-opencv
    pipeline:
      - uses: split/FIXME
    description: opencv FIXME

  - name: libopencv_aruco
    pipeline:
      - runs: FIXME

  - name: libopencv_calib3d
    pipeline:
      - runs: FIXME

  - name: libopencv_core
    pipeline:
      - runs: FIXME

  - name: libopencv_dnn
    pipeline:
      - runs: FIXME

  - name: libopencv_face
    pipeline:
      - runs: FIXME

  - name: libopencv_features2d
    pipeline:
      - runs: FIXME

  - name: libopencv_flann
    pipeline:
      - runs: FIXME

  - name: libopencv_highgui
    pipeline:
      - runs: FIXME

  - name: libopencv_imgcodecs
    pipeline:
      - runs: FIXME

  - name: libopencv_imgproc
    pipeline:
      - runs: FIXME

  - name: libopencv_ml
    pipeline:
      - runs: FIXME

  - name: libopencv_objdetect
    pipeline:
      - runs: FIXME

  - name: libopencv_optflow
    pipeline:
      - runs: FIXME

  - name: libopencv_photo
    pipeline:
      - runs: FIXME

  - name: libopencv_plot
    pipeline:
      - runs: FIXME

  - name: libopencv_shape
    pipeline:
      - runs: FIXME

  - name: libopencv_stitching
    pipeline:
      - runs: FIXME

  - name: libopencv_superres
    pipeline:
      - runs: FIXME

  - name: libopencv_tracking
    pipeline:
      - runs: FIXME

  - name: libopencv_video
    pipeline:
      - runs: FIXME

  - name: libopencv_videoio
    pipeline:
      - runs: FIXME

  - name: libopencv_videostab
    pipeline:
      - runs: FIXME

  - name: libopencv_ximgproc
    pipeline:
      - runs: FIXME

test:
  environment: {}
  pipeline:
    - name: Verify opencv installation, please improve the test as needed
      runs: opencv --version || exit 1
