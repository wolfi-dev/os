package:
  name: elvish
  version: "0.21.0"
  epoch: 3
  description: Powerful scripting language & versatile interactive shell
  copyright:
    - license: BSD-2-Clause

pipeline:
  - uses: git-checkout
    with:
      expected-commit: b22e1b921ec1edcd94035b980cec0db482451138
      repository: https://github.com/elves/elvish
      tag: v${{package.version}}

  - uses: go/build
    with:
      packages: ./cmd/elvish
      output: elvish
      ldflags: -X src.elv.sh/pkg/buildinfo.VCSOverride=%{{package.version}}

update:
  enabled: true
  github:
    identifier: elves/elvish
    strip-prefix: v

test:
  pipeline:
    # AUTOGENERATED
    - runs: |
        elvish --version
        elvish --help
