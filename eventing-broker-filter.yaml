package:
  name: eventing-broker-filter
  version: "0.45.1"
  epoch: 0
  description: responsible for filtering events within the Broker system.
  copyright:
    - license: Apache-2.0

pipeline:
  - uses: git-checkout
    with:
      expected-commit: b4c0bfe4783da439e0b24351bf929de682c11e70
      repository: https://github.com/knative/eventing
      tag: v${{package.version}}

  - uses: go/build
    with:
      output: filter
      packages: ./cmd/broker/filter

test:
  environment:
    environment:
      NAMESPACE: default
      POD_NAME: test-filter
      CONTAINER_NAME: filter
  pipeline:
    - uses: test/kwok/cluster

    - uses: test/daemon-check-output
      with:
        start: /usr/bin/filter
        timeout: 30
        expected_output: |
          Starting
          Registering

update:
  enabled: true
  github:
    identifier: knative/eventing
    strip-prefix: v
