package:
  name: fluxbox
  version: "1.3.7"
  epoch: 4
  description: Fluxbox Window Manager
  copyright:
    - license: GPL-2.0-or-later

environment:
  contents:
    packages:
      - autoconf
      - automake
      - build-base
      - busybox
      - ca-certificates-bundle
      - expat-dev
      - fontconfig-dev
      - freetype-dev
      - fribidi-dev
      - gettext-dev
      - imlib2-dev
      - libfontconfig1
      - libtool
      - libx11-dev
      - libxext-dev
      - libxft-dev
      - libxinerama-dev
      - libxpm-dev
      - libxrandr-dev
      - libxrender-dev
      - pkgconf-dev

pipeline:
  # Upstream repo does not cut new tags or releases. See note at bottom of file.
  - uses: fetch
    with:
      uri: https://github.com/fluxbox/fluxbox/archive/0f95d62b1b1add8ee7327305db7d372010fdb2f4.tar.gz
      expected-sha256: 6bcd91faac07066e5c9c952625500219774ff1dc7d5960264d0ae005fb562a97

  - runs: |
      ./autogen.sh

  - name: "Configure binutils"
    runs: |
      ./configure \
        --prefix=/usr \
        --enable-imlib2 \
        --enable-xft \
        --disable-nls

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

update:
  enabled: false
  exclude-reason: >
    Upstream repository no longer cuts any tags or releases (since 2015). The last tag cut was v1.3.7 back in 2015, but there have been several commits since then, including fixes to compile against gcc 11+. This is why updates are disabled, as we're fixing to a given commit ID in the main branch.


test:
  pipeline:
    # AUTOGENERATED
    - runs: |
        fbrun --version
        fbsetbg -h
        fbsetroot --version
        fluxbox --version
        fluxbox-generate_menu version
        fluxbox-update_configs --version
        startfluxbox --help
        fbrun --help
        fbsetroot --help
        fluxbox --help
        fluxbox-generate_menu help
        fluxbox-update_configs --help

subpackages:
  - name: fluxbox-doc
    description: fluxbox documentation
    pipeline:
      - uses: split/manpages
    test:
      pipeline:
        - uses: test/docs
