# Generated from https://git.alpinelinux.org/aports/plain/main/font-liberation/APKBUILD
package:
  name: font-liberation
  version: 2.1.5
  epoch: 2
  description: Fonts to replace commonly used Microsoft Windows fonts
  copyright:
    - license: OFL-1.1

environment:
  contents:
    packages:
      - autoconf
      - automake
      - build-base
      - busybox
      - ca-certificates-bundle
      - fontconfig
      - fontforge
      - py3-supported-fonttools
      - python3

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/liberationfonts/liberation-fonts
      tag: ${{package.version}}
      expected-commit: 4b0192046158094654e865245832c66d2104219e

  - uses: autoconf/make

  - runs: |
      mkdir -p ${{targets.destdir}}/usr/share/fonts/${{package.name}} \
        ${{targets.destdir}}/etc/fonts/conf.avail \
        ${{targets.destdir}}/etc/fonts/conf.d

      install -D -m644 liberation-fonts-ttf-${{package.version}}/*.ttf -t ${{targets.destdir}}/usr/share/fonts/${{package.name}}/

      for i in $(find . -name '*.conf'); do
        install -D -m644 "$i" -t ${{targets.destdir}}/etc/fonts/conf.avail/
        ln -sf /etc/fonts/conf.avail/$i ${{targets.destdir}}/etc/fonts/conf.d/$i
      done

  - uses: strip

update:
  enabled: true
  github:
    identifier: liberationfonts/liberation-fonts

test:
  pipeline:
    - uses: test/fonts
