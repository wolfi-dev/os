package:
  name: font-sony-misc
  version: 1.0.4
  epoch: 2
  description: X.org Sony fonts
  copyright:
    - license: HPND-sell-variant

environment:
  contents:
    packages:
      - autoconf
      - automake
      - bdftopcf
      - build-base
      - busybox
      - ca-certificates-bundle
      - encodings
      - font-alias
      - font-util-dev
      - fontconfig
      - mkfontscale
      - util-macros

pipeline:
  - uses: git-checkout
    with:
      repository: https://gitlab.freedesktop.org/xorg/font/sony-misc
      tag: font-sony-misc-${{package.version}}
      expected-commit: dea9a181f64ca0c6740de4ce23be26bc28b8df81

  - uses: autoconf/configure
    with:
      opts: |
        --with-fontdir=/usr/share/fonts/misc

  - uses: autoconf/make

  - runs: |
      make DESTDIR="${{targets.destdir}}" \
      MKFONTDIR=: \
      MKFONTSCALE=: \
      FCCACHE=: \
      install

  - uses: strip

update:
  enabled: true
  release-monitor:
    identifier: 17217

test:
  pipeline:
    - uses: test/fonts
