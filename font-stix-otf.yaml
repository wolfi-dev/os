package:
  name: font-stix-otf
  version: 2.14
  epoch: 0
  description: telugu fonts
  copyright:
    - license: OFL-1.1

environment:
  contents:
    packages:
      - build-base
      - busybox
      - cmake-3
      - py3-pip
      - python3
      - python3-dev

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/stipub/stixfonts
      tag: v${{package.version}}
      expected-commit: de537a95240e0105546bed58e15b4a61be28cd89

  - runs: |
      pip install cmake==3.22.6 
      pip install -r requirements.txt
      python tools/tirobuild.py STIXbuild.yml
      mkdir -p "${{targets.contextdir}}/usr/share/fonts/stix-fonts/"
      mv ./output/STIXbuild/STIXTwoMath/OTF "${{targets.contextdir}}/usr/share/fonts/stix-fonts/"

update:
  enabled: false
  exclude-reason: The build process is broken in 2.14 and we will need to keep an eye out for when there is a new release.

test:
  pipeline:
    - uses: test/fonts
