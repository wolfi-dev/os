package:
  name: font-wqy-microhei
  version: 0.2.0_beta3.1
  epoch: 0
  description: "WenQuanYi Micro Hei font (CJK sans-serif)"
  copyright:
    - license: GPL-3.0-or-later
  dependencies:
    provides:
      - fonts-wqy-microhei=${{package.full-version}}

environment:
  contents:
    packages:
      - build-base
      - busybox
      - binutils  # for `ar`

pipeline:
  - uses: fetch
    with:
      expected-sha256: 76db3d4f44b1f8ffce2d01c3260d16bc5a06ff227344ad3c1c9c905402d422d2
      uri: https://archive.ubuntu.com/ubuntu/pool/universe/f/fonts-wqy-microhei/fonts-wqy-microhei_0.2.0-beta-3.1_all.deb
      extract: false

  - runs: |
      ar x fonts-wqy-microhei_0.2.0-beta-3.1_all.deb
      tar -xf data.tar.*  # Handles .xz or .gz automatically
      mkdir -p "${{targets.contextdir}}/usr/share/fonts/truetype/wqy"
      mv ./usr/share/fonts/truetype/wqy/*.ttf "${{targets.contextdir}}/usr/share/fonts/truetype/wqy/"

update:
  enabled: false

test:
  pipeline:
    - uses: test/fonts
