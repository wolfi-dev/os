package:
  name: htop
  version: "3.4.0"
  epoch: 0
  description: "A cross-platform interactive process viewer."
  copyright:
    - license: GPL-2.0-or-later

environment:
  contents:
    packages:
      - autoconf
      - automake
      - build-base
      - busybox
      - libcap-dev
      - libnl3-dev
      - linux-headers
      - ncurses-dev
      - pkgconf-dev

pipeline:
  - uses: fetch
    with:
      uri: https://github.com/htop-dev/htop/releases/download/${{package.version}}/htop-${{package.version}}.tar.xz
      expected-sha256: feaabd2d31ca27c09c367a3b1b547ea9f96105fc41f4dfa799e2f49daad5de29

  - runs: ./autogen.sh

  - uses: autoconf/configure
    with:
      opts: |
        --prefix="/usr" \
        --sysconfdir="/etc" \
        --mandir="/usr/share/man" \
        --localstatedir="/var" \
        --enable-cgroup \
        --enable-capabilities \
        --enable-delayacct \
        --enable-taskstats

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

update:
  enabled: true
  release-monitor:
    identifier: 1332

test:
  pipeline:
    # AUTOGENERATED
    - runs: |
        htop --version
        htop --help
