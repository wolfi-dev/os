package:
  name: jpegoptim
  version: 1.5.5
  epoch: 0
  description: jpegoptim - utility to optimize/compress JPEG files
  copyright:
    - license: GPL-3.0-or-later

environment:
  contents:
    packages:
      - busybox
      - gcc
      - libjpeg-turbo-dev

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/tjko/jpegoptim
      tag: v${{package.version}}

  - uses: autoconf/configure

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

update:
  enabled: true
  github:
    identifier: tjko/jpegoptim
    use-tag: true
    strip-prefix: v

test:
  pipeline:
    - name: Run basic jpegoptim tests
      runs: |
        jpegoptim --version | grep v${{package.version}}
        jpegoptim --help
