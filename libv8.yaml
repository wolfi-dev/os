package:
  name: libv8
  version: 13.6.158
  epoch: 0
  description: V8 is Google's open source JavaScript engine.
  copyright:
    - license: Apache-2.0
    - license: BSD-3-Clause

environment:
  contents:
    packages:
      - bash-binsh
      - busybox
      - curl
      - git
      - python3
      - wolfi-base

pipeline:
  - runs: |
      git clone --depth=1 https://chromium.googlesource.com/chromium/tools/depot_tools.git /home/depot_tools
      export PATH=/home/depot_tools:$PATH

      mkdir -p /home/libv8
      cd /home/libv8
      fetch v8
      cd v8

      git checkout tags/${{package.version}} -b ${{package.version}}
      gclient sync

      cat ./build/install-build-deps.py

# subpackages:
#   - name: ${{package.name}}-dev
#     pipeline:
#       - uses: split/dev
#     test:
#       pipeline:
#         - uses: test/tw/ldd-check
#     description: libv8 dev

update:
  enabled: true
  github:
    identifier: v8/v8

test:
  pipeline:
    - uses: test/tw/ldd-check
