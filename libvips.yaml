package:
  name: libvips
  version: 8.15.2
  epoch: 0
  description: "A fast image processing library with low memory needs"
  copyright:
    - license: LGPL-2.1-or-later

environment:
  contents:
    packages:
      - meson
      - busybox
      - build-base
      - expat-dev
      - glib-dev
      - cmake
      - bubblewrap
      - librsvg-dev
      - libexif-dev
      - libjpeg-dev

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/libvips/libvips
      expected-commit: f18403d7bf49b574a2a1c6887dbe9c696a5125fc
      tag: v${{package.version}}

  - uses: meson/configure

  - uses: meson/compile

  - uses: meson/install

  - uses: strip

subpackages:
  - name: libvips-dev
    pipeline:
      - uses: split/dev

  - name: libvips-doc
    pipeline:
      - uses: split/manpages

update:
  enabled: true
  ignore-regex-patterns:
    - ".*-beta"
    - ".*-rc\\d+$"
  github:
    identifier: libvips/libvips
    strip-prefix: v
