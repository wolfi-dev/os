package:
  name: libxcb
  version: 1.17.0
  epoch: 9
  description: X11 client-side library
  copyright:
  - license: MIT
  dependencies:
    runtime:
    - libxcb-composite
    - libxcb-damage
    - libxcb-dpms
    - libxcb-dri2
    - libxcb-dri3
    - libxcb-glx
    - libxcb-present
    - libxcb-randr
    - libxcb-record
    - libxcb-render
    - libxcb-res
    - libxcb-screensaver
    - libxcb-shape
    - libxcb-shm
    - libxcb-sync
    - libxcb-xf86dri
    - libxcb-xfixes
    - libxcb-xinerama
    - libxcb-xinput
    - libxcb-xkb
    - libxcb-xtest
    - libxcb-xv
    - libxcb-xvmc
environment:
  contents:
    packages:
    - autoconf
    - automake
    - build-base
    - busybox
    - ca-certificates-bundle
    - libpthread-stubs
    - libtool
    - libxau-dev
    - libxdmcp-dev
    - libxslt
    - pkgconf-dev
    - py3-xcbgen
    - python3
    - util-macros
    - xcb-proto
pipeline:
- uses: git-checkout
  with:
    repository: https://gitlab.freedesktop.org/xorg/lib/libxcb.git
    tag: libxcb-${{package.version}}
    expected-commit: 622152ee42a310876f10602601206954b8d0613e
- runs: |
    ./autogen.sh
    rm -rf libtool
- uses: autoconf/configure
  with:
    opts: --enable-xkb --enable-xinput --disable-xprint --disable-dependency-tracking
- uses: autoconf/make
- uses: autoconf/make-install
- uses: strip
subpackages:
- name: libxcb-composite
  description: X11 Composite extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-composite.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-damage
  description: X11 Damage extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-damage.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-dpms
  description: X11 DPMS extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-dpms.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-dri2
  description: X11 DRI2 extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-dri2.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-dri3
  description: X11 DRI3 extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-dri3.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-glx
  description: X11 GLX extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-glx.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-present
  description: X11 Present extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-present.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-randr
  description: X11 RandR extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-randr.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-record
  description: X11 Record extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-record.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-render
  description: X11 Render extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-render.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-res
  description: X11 Resource extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-res.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-screensaver
  description: X11 Screensaver extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-screensaver.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-shape
  description: X11 Shape extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-shape.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-shm
  description: X11 Shm extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-shm.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-sync
  description: X11 Sync extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-sync.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-xf86dri
  description: X11 XFree86-DRI extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-xf86dri.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-xfixes
  description: X11 XFixes extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-xfixes.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-xinerama
  description: X11 Xinerama extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-xinerama.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-xinput
  description: X11 XInput extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-xinput.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-xkb
  description: X11 XKB extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-xkb.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-xtest
  description: X11 XTest extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-xtest.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-xv
  description: X11 XVideo extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-xv.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-xvmc
  description: X11 XVideo Motion Compensation extension library
  pipeline:
  - runs: |
      mkdir -p ${{targets.subpkgdir}}/usr/lib
      find ${{targets.destdir}}/usr/lib -name 'libxcb-xvmc.so.*' -exec mv {} ${{targets.subpkgdir}}/usr/lib/ \;
- name: libxcb-static
  description: libxcb static library
  pipeline:
  - uses: split/static
- name: libxcb-doc
  pipeline:
  - uses: split/manpages
  description: libxcb manpages
  test:
    pipeline:
    - uses: test/docs
- name: libxcb-dev
  pipeline:
  - uses: split/dev
  dependencies:
    runtime:
    - libxcb
    - libxau-dev
    - xcb-proto
    - libxdmcp-dev
  description: libxcb dev
  test:
    pipeline:
    - uses: test/pkgconf
    - uses: test/tw/ldd-check
test:
  pipeline:
  - uses: test/tw/ldd-check
  - uses: test/no-docs
update:
  enabled: true
  release-monitor:
    identifier: 1767
