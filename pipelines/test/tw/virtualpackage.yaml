name: Virtual Package Check

description: |
  Validates that a package provides specified virtual package capabilities.
  Virtual packages define alternative implementations or provide capabilities that other packages
  can depend on without specifying a concrete implementation. This check verifies the package
  correctly provides the declared virtual package names.

needs:
  packages:
    - package-type-check
    - busybox

inputs:
  virtual-pkg-name:
    description: |
      Space-separated list of virtual package names to test.
      These are the virtual capabilities this package claims to provide (e.g., "editor", "mail-transport-agent").
    required: true

# USAGE EXAMPLES:
#
# Single virtual package:
#   - uses: test/tw/virtualpackage
#     with:
#       virtual-pkg-name: "java-runtime"
#
# Multiple virtual packages:
#   - uses: test/tw/virtualpackage
#     with:
#       virtual-pkg-name: "editor text-editor"
#
pipeline:
  - name: Check if the package is a Virtual Package
    runs: |
      package-type-check virtual "${{context.name}}" --virtual-pkg "${{inputs.virtual-pkg-name}}"
