#!/bin/sh
fail() { echo "FATAL:" "$0" "$@"; exit 9; }
[ -n "${ENV_NAME}" ] || fail "invoked without ENV_NAME set"
[ "$ENV_NAME" -ef "$0" ] && fail "invoked with ENV_NAME = $0"
[ "${ENV_NAME}" != "${0##*/}" ] || fail "invoked with ENV_NAME = basename($0)"
command -v "$ENV_NAME" >/dev/null ||
  fail "invoked with ENV_NAME=$ENV_NAME, but $ENV_NAME not found in PATH"
exec "${ENV_NAME}" "$@"
