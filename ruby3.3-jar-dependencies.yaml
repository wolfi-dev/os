# Generated from https://github.com/mkristian/jar-dependencies
package:
  name: ruby3.3-jar-dependencies
  version: "0.5.5"
  epoch: 0
  description: manage jar dependencies for gems and keep track which jar was already loaded using maven artifact coordinates. it warns on version conflicts and loads only ONE jar assuming the first one is compatible to the second one otherwise your project needs to lock down the right version by providing a Jars.lock file.
  copyright:
    - license: MIT

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      - git
      - ruby-${{vars.rubyMM}}
      - ruby-${{vars.rubyMM}}-dev

pipeline:
  - uses: git-checkout
    with:
      expected-commit: b964003d619cc7cb0d7aa3b5fa2d8aeae180edf8
      repository: https://github.com/mkristian/jar-dependencies
      tag: v${{package.version}}

  - uses: ruby/build
    with:
      gem: ${{vars.gem}}

  - uses: ruby/install
    with:
      gem: ${{vars.gem}}
      version: ${{package.version}}

  - uses: ruby/clean

vars:
  gem: jar-dependencies

update:
  enabled: true
  github:
    identifier: mkristian/jar-dependencies
    use-tag: true
    strip-prefix: v

test:
  pipeline:
    # AUTOGENERATED
    - runs: |
        lock_jars --help
    - name: Verify gem import
      runs: ruby -e "require 'jar_dependencies'; puts 'jar_dependencies loaded successfully!'"
    - name: Test basic functionality
      runs: |
        ruby -e '
          begin
            require "jar_dependencies"

            # Test module definition
            raise "Missing Jars module" unless defined?(Jars)

            # Test basic methods exist
            [:require_jar, :setup, :lock].each do |method|
              raise "Missing method: Jars.#{method}" unless Jars.respond_to?(method)
            end

            puts "Basic jar-dependencies functionality verified"
            exit 0
          rescue => e
            puts "Test failed: #{e.message}"
            exit 1
          end
        '

var-transforms:
  - from: ${{package.name}}
    match: ^ruby(\d\.\d+)-.*
    replace: $1
    to: rubyMM
