package:
  name: shine
  version: 3.1.1
  epoch: 0
  description: Super fast fixed-point MP3 encoder with JS/wasm and android native bindings.
  copyright:
    - license: LGPL-2.0-only

environment:
  contents:
    packages:
      - autoconf
      - automake
      - build-base
      - busybox
      - ca-certificates-bundle
      - libtool
      - pkgconf-dev

pipeline:
  - uses: git-checkout
    with:
      expected-commit: ab5e3526b64af1a2eaa43aa6f441a7312e013519
      repository: https://github.com/toots/shine
      branch: main

  - runs: |
      libtoolize && \
        autoreconf -fiv

  - uses: autoconf/configure
    with:
      opts: |
        CFLAGS="$CFLAGS -fPIC" \
        CPPFLAGS="$CFLAGS" \
        CXXFLAGS="$CFLAGS"

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

update:
  enabled: true
  github:
    identifier: toots/shine

test:
  pipeline:
    # AUTOGENERATED
    - runs: |
        shine -h
    - uses: test/tw/ldd-check
