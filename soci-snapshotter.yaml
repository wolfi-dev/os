package:
  name: soci-snapshotter
  version: 0.11.1
  epoch: 0
  description: SOCI Snapshotter is a containerd snapshotter plugin. It enables standard OCI images to be lazily loaded without requiring a build-time conversion ste
  copyright:
    - license: Apache-2.0

environment:
  contents:
    packages:
      - autoconf
      - automake
      - containerd
      - flatbuffers
      - fuse3
      - gcc
      - git
      - go
      - wolfi-base
      - zlib-dev
      - zlib-static

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/awslabs/soci-snapshotter
      expected-commit: 28781de6731978b2e2f0f43573a345e9fa14dbd1
      tag: v${{package.version}}

  - uses: autoconf/make

  - uses: autoconf/make-install

update:
  enabled: true
  github:
    identifier: awslabs/soci-snapshotter
    strip-prefix: v
    use-tag: true

test:
  pipeline:
    - runs: |
        soci --help
        soci-snapshotter-grpc --help
