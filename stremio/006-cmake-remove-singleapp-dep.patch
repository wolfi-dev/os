Subject: Remove SingleApplication dependency from CMake
Upstream: No (custom patch for Wolfi/Debian packaging)
Origin: https://salsa.debian.org/mendezr/stremio
Author: Juan Manuel MÃ©ndez Rey <vejeta@gmail.com>

This patch removes the add_subdirectory(deps/singleapplication) line
from CMakeLists.txt since we're using CompatibleSingleApp instead,
which is embedded directly in the source tree.

It also removes the SingleApplication::SingleApplication link dependency
and sets QT_DEFAULT_MAJOR_VERSION to 5 to ensure Qt5 is used instead of Qt3.

---
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -51,9 +51,8 @@ if(APPLE)
   set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -stdlib=libc++ -arch x86_64")
   set(ENV{OPENSSL_ROOT_DIR} $ENV{OPENSSL_BIN_PATH})
 endif()
 
-set(QAPPLICATION_CLASS QApplication)
-add_subdirectory(deps/singleapplication)
+set(QT_DEFAULT_MAJOR_VERSION 5)
 
 set(CMAKE_BUILD_RPATH_USE_ORIGIN TRUE)
 
@@ -115,7 +114,6 @@ target_link_libraries(${PROJECT_NAME} LINK_PUBLIC
   Qt5::WebEngine
   Qt5::WebChannel
   Qt5::DBus
   Qt5::OpenGL
-  SingleApplication::SingleApplication
   OpenSSL::Crypto
   ${MPV_LIBRARY}
 )

