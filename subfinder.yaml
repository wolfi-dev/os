package:
  name: subfinder
  version: 2.7.1
  epoch: 0
  description: Fast passive subdomain enumeration tool
  copyright:
    - license: MIT

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/projectdiscovery/subfinder
      tag: v${{package.version}}
      expected-commit: fea5afaf4ab0c2a4ebc7d663db67108b5b8c2e7b

  - uses: go/build
    with:
      modroot: ./v2
      packages: ./cmd/subfinder
      output: subfinder
      ldflags: |
        -X 'github.com/projectdiscovery/subfinder/v2.VERSION=${{package.version}}'
        -X 'github.com/projectdiscovery/subfinder/v2.SUMMARY=${{package.version}}'
        -X 'github.com/projectdiscovery/subfinder/v2.COMMIT=$(git rev-parse HEAD)'

update:
  enabled: true
  github:
    identifier: projectdiscovery/subfinder
    strip-prefix: v

test:
  pipeline:
    - runs: |
        subfinder -h
