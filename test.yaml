package:
  name: kubeflow-profile-controller
  version: "1.10.0"
  epoch: 0
  description: Kubeflow Profile Controller for namespace and RBAC management
  copyright:
    - license: Apache-2.0

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/kubeflow/kubeflow
      tag: v${{package.version}}
      expected-commit: 90e987bf87d3e7c900926310b00bfa16b59e41eb

  - uses: go/build
    working-directory: components/profile-controller
    with:
      modroot: .
      packages: .
      output: profile-controller
      ldflags: |
        -s -w
        -X github.com/kubeflow/kubeflow/components/profile-controller/pkg/version.Version=${{package.version}}

  - uses: strip

update:
  enabled: true
  github:
    identifier: kubeflow/kubeflow
    strip-prefix: v