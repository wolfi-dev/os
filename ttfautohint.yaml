package:
  name: ttfautohint
  version: "1.8.4"
  epoch: 1
  description: "ttfautohint provides a 99% automated hinting process and a platform for finely hand-hinting the last 1%."
  copyright:
    - license: GPL-2.0-or-later

environment:
  contents:
    packages:
      - autoconf
      - automake
      - build-base
      - busybox
      - ca-certificates-bundle
      - freetype-dev
      - gnupg-dirmngr
      - gpg
      - gpg-agent
      - harfbuzz-dev

pipeline:
  - uses: fetch
    with:
      expected-sha512: 983517c360f8e65ccbf17f28f045f1c0a45078707f2e30f465a7b6df4014f0ec212780ea2703bc16be1a3c6ede70f71ea3051c067fbfd06eff40ae3b20840eec
      uri: https://download.savannah.gnu.org/releases/freetype/ttfautohint-${{package.version}}.tar.gz

  - runs: |
      tar -xf ttfautohint-${{package.version}}.tar.gz
      cd ttfautohint-${{package.version}}
      LDFLAGS="$(pkg-config --libs freetype2 harfbuzz)" CPPFLAGS="$(pkg-config --cflags freetype2 harfbuzz)" \
      ./configure \
        --disable-dependency-tracking \
        --without-qt \
        --without-doc \
        --prefix="/usr" \
        --enable-static \
        --disable-shared
      make LDFLAGS="-all-static"
      make DESTDIR="${{targets.destdir}}" install-strip

update:
  enabled: false # Unsure how to watch this one for new versions

test:
  pipeline:
    # AUTOGENERATED
    - runs: |
        ttfautohint --version
        ttfautohint --help
    - uses: test/pkgconf
