package:
  name: unifdef
  version: 2.12
  epoch: 3
  description: Selectively remove C preprocessor conditionals
  copyright:
    - license: BSD-2-Clause AND BSD-3-Clause

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      - gcc-14-default

pipeline:
  - uses: fetch
    with:
      uri: https://dotat.at/prog/unifdef/unifdef-${{package.version}}.tar.gz
      expected-sha256: fba564a24db7b97ebe9329713ac970627b902e5e9e8b14e19e024eb6e278d10b

  - runs: |
      make
      make DESTDIR="${{targets.destdir}}" prefix=/usr install

update:
  enabled: true
  release-monitor:
    identifier: 5046

test:
  pipeline:
    # AUTOGENERATED
    - runs: |
        unifdef -h
        unifdefall -V

subpackages:
  - name: unifdef-doc
    description: unifdef documentation
    pipeline:
      - uses: split/manpages
    test:
      pipeline:
        - uses: test/docs
