package:
  name: webkit2gtk
  version: 2.45.4
  epoch: 0
  description: Portable web rendering engine WebKit for GTK+ayer
  copyright:
    - license: LGPL-2.0-or-later AND BSD-2-Clause

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      - cairo-dev
      - cairo-dev
      - fribidi-dev
      - gi-docgen
      - gobject-introspection-dev
      - graphene-dev
      - gtk-4-dev
      - harfbuzz-dev
      - icu-dev
      - lcms2-dev
      - libavif-dev
      - libdrm-dev
      - libepoxy-dev
      - libevdev-dev
      - libgcrypt-dev
      - libjpeg-turbo-dev
      - libmanette-dev
      - libpng-dev
      - libpsl-dev
      - libsdl3-dev
      - libseccomp-dev
      - libsecret-dev
      - libsoup-dev
      - libtasn1-dev
      - libwebp-dev
      - libwpe-dev
      - libwpebackend-fdo-dev
      - libxft-dev
      - libxml2-dev
      - libxslt-dev
      - libxt-dev
      - mesa-dev
      - mesa-gbm
      - nghttp2-dev
      - pango-dev
      - perl-dev
      - py3-gi-docgen
      - python3-dev
      - ruby-3.2-dev
      - samurai
      - sqlite-dev
      - unifdef
      - vulkan-headers
      - vulkan-loader

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/WebKit/WebKit
      tag: webkitgtk-${{package.version}}
      expected-commit: 8282e705bc353f24bb22addbde2e541c687a934c

  - uses: cmake/configure
    with:
      opts: |
        -DPORT=GTK \
        -DCMAKE_BUILD_TYPE=RelWithDebInfo

  - uses: cmake/build

  - uses: cmake/install

subpackages:
  - name: ${{package.name}}-dev
    dependencies:
      runtime:
        - webkit2gtk
    pipeline:
      - uses: split/dev

  - name: ${{package.name}}-doc
    pipeline:
      - uses: split/dev
